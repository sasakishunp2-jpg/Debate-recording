<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Debate Audio Search</title>
    <link rel="stylesheet" href="stylesheet/style.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    <py-config src="./pyscript.toml"></py-config>

</head>
<body>
<div class="container">
    <h2>ãƒ‡ã‚£ãƒ™ãƒ¼ãƒˆéŸ³æºæ¤œç´¢ãƒ„ãƒ¼ãƒ« </h2> 
    <p>ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼š</p>
    <select id="category-input">
        <option value="">-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸ã‚“ã§ãã ã•ã„ --</option>
        <option value="conflict">Conflict</option>
        <option value="economics">Economics</option>
        <option value="education">Education</option>
        <option value="social movement">Social Movement</option>
        <option value="imaginary situation">Imaginary Situation</option>
        <option value="law">Law</option>
        <option value="philosophy">Philosophy</option>
        <option value="narrative">Narrative</option>
        <option value="sport">Sport</option>
        <option value="technology">Technology</option>
        <option value="animal right">Animal Right</option>
        <option value="criminal justice system">Criminal Justice System</option>
        <option value="politics">Politics</option>
        <option value="religion">Religion</option>
        <option value="media">Media</option>
        <option value="culture">Culture</option>
        <option value="development">Development</option>
        <option value="environment">Environment</option>
        <option value="military">Military</option>
        <option value="international relation">International Relation</option>
        <option value="medical">Medical</option>
        <option value="artificial intelligence">Artificial Intelligence</option>
        <option value="tourism">Tourism</option>
    </select>
    <button py-click="search_videos">æ¤œç´¢</button>

    <div id="output"></div>

 </div> 
    <script type="py">
        from pyscript import document
        import csv

        def search_videos(event):
            target = document.querySelector("#category-input").value.strip().lower()
            output_div = document.querySelector("#output")
            output_div.innerHTML = ""
            
            if not target:
                output_div.innerText = "ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"
                return

            results_found = False
            
            # CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥èª­ã¿è¾¼ã‚€å‡¦ç†
            try:
                with open("debate_data.csv", mode="r", encoding="utf-8") as f:
                    reader = csv.reader(f)
                    for row in reader:
                        # ç©ºè¡Œã‚’é£›ã°ã™
                        if not row: continue
                        
                        video_id = row[0]
                        category = row[1]

                        if target in category.lower():
                            url = f"https://www.youtube.com/watch?v={video_id}"
                            link_html = f'<a href="{url}" target="_blank" class="url-link">ğŸ”— {url}</a>'
                            output_div.innerHTML += link_html
                            results_found = True
            except Exception as e:
                output_div.innerText = f"ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}"

            if not results_found:
                output_div.innerText = f"ã€Œ{target}ã€ã«è©²å½“ã™ã‚‹å‹•ç”»ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"
    </script>

</body>
</html>